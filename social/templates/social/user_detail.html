{% extends 'base.html' %}

{% block title %}{{ u.username }}{% endblock title %}

{% block content %}
    <h1>{{u.username}}</h1>
    {% if messages %}
            <ul>
                {% for message in messages %}
                <li>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    {% if is_following %}
        <form action="{% url 'social:unfollow' u.id %}" method="post">
            {% csrf_token %}
            <button>Unfollow</button>
        </form>
    {% else %}
        <form action="{% url 'social:follow' u.id %}" method="post">
            {% csrf_token %}
            <button>Follow</button>
        </form>
    {%endif%}
    {% for post in u.post_set.all %}
        <h2>{{post.title}}<h2>
    {% endfor %}
    <form method="post" >
            {% csrf_token %}
            <table>
            {{ form.as_table }}
                <tr>
                <td></td>
                <td><input type="submit" name="submit" value="Register" /></td>
            </tr>
        </table>
    </form>
    

    <script>
        var button = document.querySelector('form[name="myform"] > button');
            button.addEventListener(function() {
            document.querySelector("form[name="myform"]").submit();
        });
    </script>

{% endblock content %}